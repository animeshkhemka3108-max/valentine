<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Cupcake â¤ï¸</title>

<style>
*{box-sizing:border-box;font-family:Poppins,system-ui}
body{
margin:0;
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
background:linear-gradient(135deg,#fde2e4,#fff1f2);
overflow:hidden;
}
.card{
width:94%;
max-width:420px;
background:#fff;
border-radius:24px;
padding:22px;
box-shadow:0 25px 60px rgba(0,0,0,.15);
text-align:center;
animation:fade .5s ease;
}
.hidden{display:none}

.option{
padding:14px;
margin:10px 0;
border-radius:16px;
border:1px solid #ffd0d5;
cursor:pointer;
transition:.2s;
}
.option:hover{background:#fff5f6;transform:scale(1.03)}

button{
width:100%;
padding:15px;
border:none;
border-radius:20px;
background:#ff7a8a;
color:#fff;
font-size:16px;
cursor:pointer;
margin-top:14px;
transition:.2s;
}
button:hover{transform:scale(1.05)}

.shake{animation:shake .4s}
@keyframes shake{
0%{transform:translateX(0)}
25%{transform:translateX(-6px)}
50%{transform:translateX(6px)}
75%{transform:translateX(-6px)}
100%{transform:translateX(0)}
}
@keyframes fade{from{opacity:0;transform:scale(.94)}to{opacity:1}}

.grid{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:8px;
margin:18px 0;
}
.slot,.piece{
aspect-ratio:1/1;
border-radius:14px;
}
.slot{border:2px dashed #ffd0d5}
.piece{
background-image:url('photo.jpeg');
background-size:400% 200%;
cursor:pointer;
transition:.2s;
}
.piece.selected{outline:3px solid #ff7a8a}

#error,#error2{
color:#b00020;
margin-top:10px;
font-weight:600;
}

input{
width:100%;
padding:18px;
border-radius:20px;
border:1px solid #ffd0d5;
font-size:22px;
text-align:center;
letter-spacing:6px;
}

/* CELEBRATION */
.celebrate{
position:fixed;
top:-12px;
border-radius:50%;
pointer-events:none;
animation:fall linear forwards;
}
@keyframes fall{
to{transform:translateY(110vh) rotate(360deg);opacity:0}
}
.heart{
color:#ff5a7a;
font-size:20px;
}
</style>
</head>

<body>

<!-- LEVEL 1 -->
<div class="card" id="l1">
<h2>LEVEL 1 â¤ï¸</h2>
<p>Letâ€™s rewind a little, Cupcake ğŸ’•</p>

<p><b>Where did our story begin?</b></p>
<div class="option" onclick="nextQ()">Que Pasa</div>
<div class="option" onclick="wrong()">Starbucks</div>

<div id="q2" class="hidden">
<p><b>Who proposed at this place?</b></p>
<div class="option" onclick="nextQ()">Animesh</div>
<div class="option" onclick="wrong()">Prakriti</div>
</div>

<div id="q3" class="hidden">
<p><b>What food do we argue about the most?</b></p>
<div class="option" onclick="nextQ()">Sushi & atrangi food</div>
<div class="option" onclick="wrong()">Pizza</div>
</div>

<div id="q4" class="hidden">
<p><b>Who is more romantic?</b></p>
<div class="option" onclick="finishL1()">Animesh</div>
<div class="option" onclick="wrong()">Both</div>
</div>

<div id="error"></div>
</div>

<!-- LEVEL 1 CLEARED -->
<div class="card hidden" id="l1clear">
<h2>ğŸ‰ LEVEL 1 CLEARED ğŸ’•</h2>
<p><b>You earned 2 digits</b><br>Letâ€™s move to Level 2â€¦</p>
</div>

<!-- LEVEL 2 -->
<div class="card hidden" id="l2">
<h2>LEVEL 2 ğŸ§©</h2>
<p>Every piece fitsâ€¦ just like us ğŸ’•</p>
<div class="grid" id="slots"></div>
<div class="grid" id="pieces"></div>
<button class="hidden" id="toLock" onclick="showLock()">Proceed to Final Lock ğŸ’–</button>
</div>

<!-- LOCK -->
<div class="card hidden" id="lock">
<h2>ğŸ” Final Lock</h2>
<p>Digits unlocked: <b>3 7 1 9 5</b></p>
<input id="code" maxlength="5" placeholder="â€¢ â€¢ â€¢ â€¢ â€¢">
<button onclick="unlock()">Unlock</button>
<div id="error2"></div>
</div>

<!-- FINAL -->
<div class="card hidden" id="final">
<h2>ğŸ‰</h2>
<p>
Tum se hi din hota haiâ€¦<br>
Tum se hi shaam aati haiâ€¦<br>
Tum se hi ğŸ’•
</p>
<h2>Will you be my Valentine? ğŸŒ¹</h2>
<button onclick="yesClicked()">YES ğŸ’–</button>
<button onclick="yesClicked()">YES, ALWAYS ğŸ˜Œ</button>
<audio id="song" src="https://cdn.pixabay.com/audio/2022/03/15/audio_7b7bfb8c63.mp3"></audio>
</div>

<script>
let step=1;
function nextQ(){
document.getElementById("q"+step)?.classList.remove("hidden");
step++;
}
function finishL1(){
document.getElementById("l1").classList.add("hidden");
document.getElementById("l1clear").classList.remove("hidden");
celebrate(70);
setTimeout(()=>{
document.getElementById("l1clear").classList.add("hidden");
document.getElementById("l2").classList.remove("hidden");
initPuzzle();
},1800);
}
function wrong(){
let c=document.querySelector(".card:not(.hidden)");
c.classList.add("shake");
document.getElementById("error").innerText="Wrong answer Cupcakeâ€¦ try again ğŸ’”";
setTimeout(()=>c.classList.remove("shake"),400);
}

function celebrate(count){
for(let i=0;i<count;i++){
let e=document.createElement("div");
e.className="celebrate";
let size=Math.random()*10+10;
e.style.width=size+"px";
e.style.height=size+"px";
e.style.left=Math.random()*100+"vw";
e.style.background=["#ff7a8a","#ffd166","#fcbf49","#ffb3c6"][Math.floor(Math.random()*4)];
e.style.animationDuration=(Math.random()*1.8+1.8)+"s";
document.body.appendChild(e);
setTimeout(()=>e.remove(),3500);
}
}

/* PUZZLE */
let selected=null,correct=0;
function initPuzzle(){
const slots=document.getElementById("slots");
const pieces=document.getElementById("pieces");
let arr=[...Array(8).keys()].sort(()=>Math.random()-0.5);
arr.forEach(i=>{
let p=document.createElement("div");
p.className="piece";
p.dataset.pos=i;
p.style.backgroundPosition=`${(i%4)*33.3}% ${Math.floor(i/4)*100}%`;
p.onclick=()=>select(p);
pieces.appendChild(p);
});
for(let i=0;i<8;i++){
let s=document.createElement("div");
s.className="slot";
s.dataset.pos=i;
s.onclick=()=>place(s);
slots.appendChild(s);
}
}
function select(p){
document.querySelectorAll(".piece").forEach(x=>x.classList.remove("selected"));
p.classList.add("selected");
selected=p;
}
function place(s){
if(!selected) return;
if(s.dataset.pos===selected.dataset.pos){
s.appendChild(selected);
selected.classList.remove("selected");
selected=null;
correct++;
if(correct===8){
celebrate(100);
document.getElementById("toLock").classList.remove("hidden");
}
}
}

function showLock(){
document.getElementById("l2").classList.add("hidden");
document.getElementById("lock").classList.remove("hidden");
}

function unlock(){
if(code.value==="37195"){
document.getElementById("lock").classList.add("hidden");
document.getElementById("final").classList.remove("hidden");
song.play();
celebrate(140);
}else{
document.getElementById("error2").innerText="Almost Cupcakeâ€¦ try again ğŸ’”";
}
}

function yesClicked(){
document.querySelectorAll("#final button").forEach(b=>b.style.display="none");
let msg=document.createElement("p");
msg.innerHTML="<b>You just made my world brighter ğŸŒ¸</b>";
document.getElementById("final").appendChild(msg);
setInterval(()=>{
let h=document.createElement("div");
h.className="celebrate heart";
h.innerHTML="â¤ï¸";
h.style.left=Math.random()*100+"vw";
h.style.animationDuration=(Math.random()*2+2)+"s";
document.body.appendChild(h);
setTimeout(()=>h.remove(),5000);
},300);
}
</script>

</body>
</html>
